<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>登录页面</title>
<link rel="stylesheet" href="css/denglu.css">
</head>
<body>
<!-- header -->
<div class="he">
	<div class="header">
		<img src="img/loge.png" alt="">
	</div>
</div>
<!-- zhongj -->
<div class="zhongj">
	<div class="zhongjian"> 
		<div class="beijing"></div>
		<div class="denglukuang">
			<div class="denglukuang-tou">
				<h2>欢迎登录海尔商城</h2>
				<a href="#">免费注册></a>
			</div>
			<div class="denglukuang-shen">
				<ul id="tab_t">
					<li onclick="show(1)" class="act">普通登录</li>
					<li onclick="show(2)">手机动态密码登录</li>
				</ul>
				<div id="tab_c">
					<div class="denglukuang-shen-form">
						<form>
							<input id="userId" type="text" placeholder="邮箱&nbsp;/&nbsp;手机">
							<input id="userpass" type="password" placeholder="密码">
							<a href="">忘记密码？</a>
							<input id="btnLogin" type="button" value="登录">
							<span id="yonghuming"></span>
							<span id="mima"></span>
						</form>
					</div>
					<div class="denglukuang-shen-form hide">
						<form>
							<input id="phoneId" type="text" placeholder="手机">
							<input id="userpass" type="password" placeholder="密码">
							<span class="huoquyanzhengma">获取验证码</span>
							<input type="button" value="登录">
							<span id="shoujihao"></span>
						</form>
					</div>
				</div>
			</div>
			<div class="denglukuang-jiao">
				<p>其他登录方式&nbsp;:</p>
				<a href="#"><span></span>新浪微博</a>
				<a href="#"><span></span>支付宝</a>
				<a href="#"><span></span>网易</a>
				<a href="#"><span></span>快捷通</a>
			</div>
		</div>
		
	</div>
</div>
<script>
	//根据序号切换选项卡，序号会传给data参数
	function xuanze(data){
		var liaar=document.getElementsByTagName("li");//取得所有li元素，也就是取得所有选项卡
		for(var i=0;i<liaar.length;i++){//遍历所有li元素
			liaar[i].className="";//把所有选项卡样式清除
		}
		liaar[data-1].className="act";//设置序号对应的选项卡样式为act样式
		var tab_c=document.getElementById("tab_c");//取得包含所有内容层的DIV
		var arrdiv=[];
		for(var i in tab_c.childNodes){//循环tab_c的所有子元素
			if(tab_c.childNodes[i].nodeType==1){//判断子元素是否是元素节点，判断是否是内容层
				tab_c.childNodes[i].className="hide";//设置所有子元素节点样式为隐藏
				arrdiv.push(tab_c.childNodes[i]);//将所有元素节点放置到一个数组中
			}
		}
		arrdiv[data-1].className="";//设置对应的内容层样式为空，实现对应层显示效果
	}
</script>
<script type="text/javascript">

function show(ord){
	//获取所有的li
	var lis = document.getElementById("tab_t").children;
	//清除所有li的样式
	for(var i=0;i<lis.length;i++){
		lis[i].className="";
	}
	//把当前li的样式设置为act
	lis[ord-1].className = "act";
	
	var divs = document.getElementById("tab_c").children;
	//把所有的div隐藏
	for(var i=0;i<divs.length;i++){
		divs[i].style.display = "none";
	}
	//让当前div显示
	divs[ord-1].style.display = "block";
}

</script>
<!-- footer -->
<div class="fo">
	<div class="footer">
		<div class="footer-tou">
			<a href="#">关于海尔</a>
			<span>|</span>
			<a href="#">售后服务</a>
			<span>|</span>
			<a href="#">投诉建议</a>
			<span>|</span>
			<a href="#">友情链接</a>
			<span>|</span>
			<a href="#">联系我们</a>
		</div>
		<p>网站备案/许可证号：鲁ICP备09096283号</p>
		<p>Copyright©2000-2017 海尔集团电子商务有限公司 All Rights Reserved</p>
		<img src="img/footer-one.png" alt="">
	</div>
</div>
</body>
</html>
<script type="text/javascript">

function $(id){
	return document.getElementById(id);
}

window.onload = function(){
	//用户名格式要求。（只能出现字母、数字、下划线，必须包含字母和数字，不能有特殊符号，不能以数字开头，长度6-16）
	$("userId").onblur = function(){
		//用户名格式的规则：只能出现字母、数字、下划线，必须包含字母和数字，不能有特殊符号，不能以数字开头，长度6-16
		var reg =  /^\w+@[a-zA-Z0-9]+\.(com|cn|net|top|vip)$/;
		if(reg.test(this.value)==false){
			$("yonghuming").innerHTML = "亲，用户名格式不正确";
		}else{
			$("yonghuming").innerHTML = "√";
		}
	}
	$("phoneId").onblur = function(){
		//手机的规则：11位纯数字，1开头，第二位不能是0,1,2,6
		//第一位是1，第二位是数字（但不能是0,1,2,6），后面九位数字
		
		var reg = /^1[^0126]\d{9}$/;
		if(reg.test(this.value)==false){
			$("shoujihao").innerHTML = "亲，手机号码格式不正确";
		}else{
			$("shoujihao").innerHTML = "√";
		}
	}


	$("btnLogin").onclick=function(){
		//1创建对象
		let xhr = new XMLHttpRequest();
		//2设置请求参数
		xhr.open("post","denglu.php",true);//用post的请求方式 open下必须加那句话
		//3设置回调函数
		xhr.onreadystatechange=function(){
			if(xhr.readyState==4 && xhr.status==200){
				if(xhr.responseText=="1"){
					
			 		alert("亲，登陆成功！");
				}else{
				
			 		alert("亲，用户名或者密码不对，请重新输入！");
				}
			}
		}
		xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
		//4、发送请求
		let sendstr = "username="+$("userId").value+"&userpass="+$("userpass").value;
		xhr.send(sendstr);
	}
}
</script>
